/*!*
 * @autor: Blim - Koo Chi Hoon(kkh975@naver.com)
 * @license http://blim.mit-license.org/
 */
function SwipeBase(t){"use strict";function e(){if(T=q.extend(Y,t),C=q.isArray(T.wrap)?T.wrap:q.dom2Array(T.wrap),B=q.isArray(T.list)?T.list:q.dom2Array(T.list),!B||!C)return!1;if(O=B.length,C=C[0],A=C.parentNode,X=q.getCssPrefix(),T.touchMinumRange=Math.max(1,Math.min(100,T.touchMinumRange)),2>O)return!1;if(!(q.hasCss3Animation()&&"addEventListener"in window&&"querySelector"in document))return!1;if(T.slideShowTime&&("boolean"==typeof T.slideShowTime&&(z=T.slideShowTime,z&&(T.slideShowTime=Y.slideShowTime)),"string"==typeof T.slideShowTime&&(T.slideShowTime=parseInt(T.slideShowTime,10)),isNaN(T.slideShowTime)?z=!1:(z=!0,2*T.duration>=T.slideShowTime&&(T.slideShowTime=2*T.duration))),T.toStart&&(L=q.isArray(T.toStart)?T.toStart:q.dom2Array(T.toStart),q.setBtnEvent(L,T.startEvents,s)),T.toStop&&($=q.isArray(T.toStop)?T.toStop:q.dom2Array(T.toStop),q.setBtnEvent($,T.stopEvents,i)),T.toPrev&&(N=q.isArray(T.toPrev)?T.toPrev:q.dom2Array(T.toPrev),q.setBtnEvent(N,T.moveEvents,v)),T.toNext&&(P=q.isArray(T.toNext)?T.toNext:q.dom2Array(T.toNext),q.setBtnEvent(P,T.moveEvents,p)),T.pages&&(M=q.isArray(T.pages)?T.pages:q.dom2Array(T.pages),q.setBtnEvent(M,T.moveEvents,function(t){m(t)})),2===O&&T.loop){var e=null;e=B[0].cloneNode(!0),B.push(e),C.appendChild(e),e=B[1].cloneNode(!0),B.push(e),C.appendChild(e),J=!0,O=4}T.startIdx=Math.max(T.startIdx,0),T.startIdx=Math.min(T.startIdx,B.length),f(T.startIdx),window.addEventListener("resize",r),A.addEventListener("touchstart",F.setStart);for(var n=B.length;--n>-1;)B[n].addEventListener("focus",i,!1),B[n].addEventListener("blur",s,!1);return!0}function n(){A.style.overflow="hidden",C.style.position="relative",q.setCss3Transition(C,0,0),D=A.offsetWidth,R=(100-B[0].offsetWidth/D*100)/2,R=Math.max(R,0);for(var t=0,e=0,n=O,o=u()*-b;n>t;t++)e=b*t,e+=o,T.loop&&(b*(n-1)===e&&(e=-1*b),-1*b>e&&(e+=b*n)),e+=R,B[t].style.position="absolute",q.setCss3Transition(B[t],0,e);s(),"function"==typeof T.create&&T.create(u())}function o(){var t=B.length;for(window.removeEventListener("resize",r),A.removeEventListener("touchstart",F.setStart);--t>-1;)B[t].removeEventListener("focus",i,!1),B[t].removeEventListener("blur",s,!1)}function s(){z&&null===k&&(k=setInterval(p,T.slideShowTime))}function i(){clearInterval(k),k=null}function r(){D=A.offsetWidth,R=(100-B[0].offsetWidth/D*100)/2}function a(t){C.style.height=t||B[u()].offsetHeight}function u(){return W}function f(t){W=t}function d(){return V}function c(t){V=t}function l(){var t=u();return--t<0&&(t=T.loop?O-1:-1),t}function h(){var t=u();return++t>O-1&&(t=T.loop?0:-1),t}function v(){m(l(),"prev")}function p(){m(h(),"next")}function m(t,e){var n=u(),o=t-n,s=1===arguments.length;return j?!1:t===n?!1:0>t||t>O-1?!1:J&&s&&(t>1||t%2===n%2)?!1:(s&&(e=o>0?"next":"prev"),J&&s&&t%2===1&&n%2===0&&(e="next"),A.addEventListener(X.transitionsendJs,S,!1),c(t),y(e),void w(T.duration,e))}function y(t){var e=u(),n=d(),o=O;for(x();--o>-1;)o!==e&&o!==n&&q.setCss3Transition(B[o],0,9999);q.setCss3Transition(B[e],0,0+R),q.setCss3Transition(B[n],0,("next"===t?b:-b)+R),"function"==typeof T.before&&T.before(J?e%2:e)}function w(t,e){var n=(u(),d()),o=q.getCss3TransformPos(C),s=H="next"===e?-b:b;s="next"===e?s+2*R:s-2*R,f(n),F.is_drag&&o%b==0?S():(F.is_drag?(t=t*(b-Math.abs(o))/b,t=Math.abs(t),t=Math.max(t,10)):t=t,q.setCss3Transition(C,t,s),setTimeout(function(){q.getCss3TransformPos(B[n])==R&&j&&(A.removeEventListener(X.transitionsendJs,S,!1),g(),"function"==typeof T.active&&T.active(J?n%2:n))},t+100))}function S(t){for(var e=u(),n=l(),o=h(),s=O;--s>-1;)s!==e&&s!==n&&s!==o&&q.setCss3Transition(B[s],0,9999);H=0,q.setCss3Transition(C,0,H),q.setCss3Transition(B[e],0,0+R),-1!==n&&q.setCss3Transition(B[n],0,-b+R),-1!==o&&q.setCss3Transition(B[o],0,b+R),A.removeEventListener(X.transitionsendJs,S,!1),g(),"function"==typeof T.active&&T.active(J?e%2:e)}function x(){j=!0,i()}function g(){j=!1,s()}function _(){I=!1}function E(t){I=t||!0}var b=100,T=null,A=null,C=null,B=null,M=null,L=null,$=null,N=null,P=null,k=null,I=!1,J=!1,z=!1,j=!1,D=0,R=0,H=0,O=0,W=0,V=0,X={},Y={wrap:null,list:null,pages:null,toStart:null,toStop:null,toPrev:null,toNext:null,startEvents:"click",stopEvents:"click",moveEvents:"click",pageEvents:"click",startIdx:0,slideShowTime:3e3,touchMinumRange:10,scrollMinumRange:20,sideTouchLock:!1,loop:!0,duration:300,create:null,before:null,active:null},q={extend:function(t,e){var n=null,o={};for(n in t)o[n]=n in e?e[n]:t[n];return o},isArray:function(t){return t&&"[object Array]"===Object.prototype.toString.call(t)},dom2Array:function(t){var e=[],n=0,o=0;if(t){if(o=t.length,o>0)for(n=0;o>n;n++)e.push(t[n]);else e.push(t);return e}return null},object2Array:function(t){var e=[];for(var n in t)e.push(t[n]);return e},getCssPrefix:function(){var t=["-webkit-transition","transition"],e=["-webkit-transform","transform"],n=["webkitTransition","transition"],o=["webkitTransform","transform"],s=["webkitTransitionEnd","transitionend"],i=window.getComputedStyle(document.body,""),r=(q.object2Array(i).join("").match(/-(webkit|moz|ms|o)-/)||""===i.OLink&&["","o"])[1],a="WebKit|Moz|MS|O".match(new RegExp("("+r+")","i"))[1],u="webkit"===r;return{prefixCss:r,prefixJs:a.toLowerCase(),transitionsCss:t[u?0:1],transformsCss:e[u?0:1],transformsJs:o[u?0:1],transitionsJs:n[u?0:1],transitionsendJs:s[u?0:1]}},hasCss3Animation:function(){return X.transitionsJs in document.createElement("div").style},getCss3TransformPos:function(t){var e="";return e=t.style[X.transformsJs],e=e.substring(e.indexOf("(")+1,e.indexOf("%")),parseFloat(e)},setCss3Transition:function(t,e,n){q.setCss3(t,"transition",e+"ms"),q.setCss3(t,"transform","translate3d("+n+"%, 0, 0)")},setCss3:function(t,e,n){"transition"===e?t.style[X.transitionsJs]="ease-out "+n:"transform"===e?t.style[X.transformsJs]=n:(t.style[e]=n,t.style["-"+X.prefixJs+"-"+e]=n)},setBtnEvent:function(t,e,n){for(var o=e.split(","),s=o.length,i=t.length;--s>-1;)for(;--i>-1;)!function(e){t[e].addEventListener(o[s],function(t){n(e),t.preventDefault()})}(i)}},F={is_drag:null,is_disable:!1,touch_start_x:0,touch_start_y:0,touch_move_x1:0,touch_move_y1:0,move_dx:0,setInitVaiable:function(){F.is_drag=null,F.is_disable=!1,F.touch_start_x=0,F.touch_start_y=0,F.touch_move_x1=0,F.touch_move_y1=0,F.move_dx=0},canPrevMove:function(){return T.loop||-1!==l()?!0:!1},canNextMove:function(){var t=h(),e=(J?O-2:O)-1;return!T.loop&&(-1===t||t>e)?!1:!0},setStart:function(t){I===!0||j||"touchstart"!==t.type||1!==t.touches.length||(i(),F.is_drag=null,F.touch_start_x=t.touches[0].pageX,F.touch_start_y=t.touches[0].pageY),A.addEventListener("touchmove",F.setMove),A.addEventListener("touchend",F.setEnd),A.addEventListener("touchcancel",F.setEnd)},setMove:function(t){if(I!==!0&&!j){var e=u(),n=0,o=0,s=!1;"touchmove"===t.type&&1===t.touches.length&&(F.touch_move_x1=t.touches[0].pageX,F.touch_move_y1=t.touches[0].pageY,n=F.touch_move_x1-F.touch_start_x,o=F.touch_move_y1-F.touch_start_y,s=0>n,F.move_dx=n/D*100,F.move_dx=Math.max(-100,Math.min(100,F.move_dx)),F.is_disable=s&&("next"===I||"right"===I)||!s&&("prev"===I||"left"===I),!T.loop&&T.sideTouchLock&&(!s&&0===e||s&&e===O-1)&&(F.is_disable=!0),null==F.is_drag&&(F.is_drag=F.is_drag||Math.abs(n)>Math.abs(o)),F.is_drag&&!F.is_disable&&(t.preventDefault(),F.is_drag=!0,q.setCss3Transition(C,0,(T.loop?0:H)+F.move_dx)))}},setEnd:function(t){if(!F.is_disable&&!j){var e=Math.abs(F.move_dx)>T.touchMinumRange,n=F.move_dx<0,o=n?F.canNextMove():F.canPrevMove();F.is_drag&&e&&o?n?p():v():q.setCss3Transition(C,T.duration,T.loop?0:H)}A.removeEventListener("touchmove",F.setMove),A.removeEventListener("touchend",F.setEnd),A.removeEventListener("touchcancel",F.setEnd),F.setInitVaiable()}};return e()?(n(),{startSlideShow:s,stopSlideShow:i,refreshSize:r,setHeight:a,getIdx:u,toNext:p,toPrev:v,toSlide:m,destory:o,touchEnable:_,touchDisable:E}):void 0}!function(t){"use strict";t.fn.swipeBase=function(e){return e=e||{},e.$list=e.$list||t(this).find("> ul > li"),e.$wrap=e.$wrap||t(this).find("> ul"),e.wrap=e.$wrap.toArray()||[],e.list=e.$list.toArray()||[],e.pages=e.$pages&&e.$pages.toArray?e.$pages.toArray():[],e.toStart=e.$toStart&&e.$toStart.toArray?e.$toStart.toArray():[],e.toStop=e.$toStop&&e.$toStop.toArray?e.$toStop.toArray():[],e.toPrev=e.$toPrev&&e.$toPrev.toArray?e.$toPrev.toArray():[],e.toNext=e.$toNext&&e.$toNext.toArray?e.$toNext.toArray():[],this.each(function(){t(this).data("SwipeBase",new SwipeBase(e))})},t.fn.swipeBase2start=function(){return this.each(function(){var e=t(this).data("SwipeBase");"undefined"!=typeof e&&"undefined"!=typeof e.startSlideShow&&e.startSlideShow()})},t.fn.swipeBase2stop=function(){return this.each(function(){var e=t(this).data("SwipeBase");"undefined"!=typeof e&&"undefined"!=typeof e.stopSlideShow&&e.stopSlideShow()})},t.fn.swipeBase2refresh=function(){return this.each(function(){var e=t(this).data("SwipeBase");"undefined"!=typeof e&&"undefined"!=typeof e.refreshSize&&e.refreshSize()})},t.fn.swipeBase2setHeight=function(e){return this.each(function(){var n=t(this).data("SwipeBase");"undefined"!=typeof n&&"undefined"!=typeof n.setHeight&&n.setHeight(e)})},t.fn.swipeBase2prev=function(){return this.each(function(){var e=t(this).data("SwipeBase");"undefined"!=typeof e&&"undefined"!=typeof e.toPrev&&e.toPrev()})},t.fn.swipeBase2next=function(){return this.each(function(){var e=t(this).data("SwipeBase");"undefined"!=typeof e&&"undefined"!=typeof e.toNext&&e.toNext()})},t.fn.swipeBase2slide=function(e){return this.each(function(){var n=t(this).data("SwipeBase");"undefined"!=typeof n&&"undefined"!=typeof n.toSlide&&n.toSlide(e)})},t.fn.swipeBase2destory=function(e){return this.each(function(){var e=t(this).data("SwipeBase");"undefined"!=typeof e&&"undefined"!=typeof e.destory&&e.destory()})},t.fn.swipeBase2touchEnable=function(){return this.each(function(){var e=t(this).data("SwipeBase");"undefined"!=typeof e&&"undefined"!=typeof e.touchEnable&&e.touchEnable()})},t.fn.swipeBase2touchDisable=function(e){return this.each(function(){var n=t(this).data("SwipeBase");"undefined"!=typeof n&&"undefined"!=typeof n.touchDisable&&n.touchDisable(e||!0)})}}(jQuery);