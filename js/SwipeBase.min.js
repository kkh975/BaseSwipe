/*!*
 * @autor: Blim - Koo Chi Hoon(kkh975@naver.com)
 * @license http://blim.mit-license.org/
 */
function SwipeBase(t){"use strict";function e(){var e=null,s=0;if(C=F.extend(z,t),b=F.isArray(C.wrap)?C.wrap:F.dom2Array(C.wrap),A=F.isArray(C.list)?C.list:F.dom2Array(C.list),!A||!b)return!1;if(j=A.length,b=b[0],E=b.parentNode,X=F.getCssPrefix(),C.touchMinumRange=Math.max(1,Math.min(100,C.touchMinumRange)),2>j)return!1;if(!(F.hasCss3Animation()&&"addEventListener"in window))return!1;for(C.slideShowTime&&("boolean"==typeof C.slideShowTime&&(P=C.slideShowTime,P&&(C.slideShowTime=z.slideShowTime)),"string"==typeof C.slideShowTime&&(C.slideShowTime=parseInt(C.slideShowTime,10)),isNaN(C.slideShowTime)?P=!1:(P=!0,2*C.duration>=C.slideShowTime&&(C.slideShowTime=2*C.duration))),C.toStart&&(_=F.isArray(C.toStart)?C.toStart:F.dom2Array(C.toStart),F.setBtnEvent(_,C.startEvents,i)),C.toStop&&(L=F.isArray(C.toStop)?C.toStop:F.dom2Array(C.toStop),F.setBtnEvent(L,C.stopEvents,o)),C.toPrev&&(B=F.isArray(C.toPrev)?C.toPrev:F.dom2Array(C.toPrev),F.setBtnEvent(B,C.moveEvents,v)),C.toNext&&(M=F.isArray(C.toNext)?C.toNext:F.dom2Array(C.toNext),F.setBtnEvent(M,C.moveEvents,h)),C.pages&&(T=F.isArray(C.pages)?C.pages:F.dom2Array(C.pages),F.setBtnEvent(T,C.moveEvents,function(t){m(t)})),2===j&&C.loop&&(e=A[0].cloneNode(!0),A.push(e),b.appendChild(e),e=A[1].cloneNode(!0),A.push(e),b.appendChild(e),k=!0,j=4),s=A.length,window.addEventListener("load",n,!1),E.addEventListener("touchstart",D.setStart),E.addEventListener("touchmove",D.setMove),E.addEventListener("touchend",D.setEnd),E.addEventListener("touchcancel",D.setEnd);--s>-1;)A[s].setAttribute("data-swipe-idx",s),A[s].addEventListener("focus",o,!1),A[s].addEventListener("blur",i,!1),A[s].addEventListener(X.transitionsendJs,y,!1),A[s].addEventListener(X.animationendJs,y,!1);return!0}function n(){var t=null,e="";E.style.overflow="hidden",b.style.position="relative",b.style.height="100%",b.style.width="100%",F.setCss3(b,"transform-style","preserve-3d"),N=E.offsetWidth,I=(100-A[0].offsetWidth/N*100)/2;for(var n=0,s=j,o=0;s>n;n++)o=C.loop&&j-1===n?-S:S*n,O.push(o),A[n].style.position="absolute",A[n].style.height="100%",A[n].style.visibility=2>n||j-1===n?"visible":"hidden",F.setCss3Transition(A[n],0,O[n]+I);e=F.getCss3AnimateTranslate("next-to-now",S+I,0+I),e+=F.getCss3AnimateTranslate("now-to-prev",0+I,-S+I),e+=F.getCss3AnimateTranslate("prev-to-now",-S+I,0+I),e+=F.getCss3AnimateTranslate("now-to-next",0+I,S+I),t=document.createElement("style"),t.setAttribute("type","text/css"),t.setAttribute("data-swipe","swipeBase"),t.innerHTML=e,E.appendChild(t),i(),"function"==typeof C.create&&C.create(a())}function s(){var t=A.length;for(E.querySelector("style").removeAttribute("data-swipe"),window.removeEventListener("load",n,!1),E.removeEventListener("touchstart",D.setStart),E.removeEventListener("touchmove",D.setMove),E.removeEventListener("touchend",D.setEnd),E.removeEventListener("touchcancel",D.setEnd);--t>-1;)A[t].removeAttribute("data-swipe-idx"),A[t].removeEventListener("focus",o,!1),A[t].removeEventListener("blur",i,!1),A[t].removeEventListener(X.transitionsendJs,y,!1),A[t].removeEventListener(X.animationendJs,y,!1)}function i(){P&&null===$&&($=setInterval(h,C.slideShowTime))}function o(){clearInterval($),$=null}function r(){N=E.offsetWidth,I=(100-A[0].offsetWidth/N*100)/2}function a(){return R}function u(t){R=t}function l(){return W}function c(t){W=t}function d(){var t=a();return--t<0&&(t=C.loop?j-1:-1),t}function f(){var t=a();return++t>j-1&&(t=C.loop?0:-1),t}function v(){m(d(),"prev")}function h(){m(f(),"next")}function m(t,e){var n=a(),s=t-n,i=1===arguments.length;return J?!1:t===n?!1:0>t||t>j-1?!1:k&&i&&(t>1||t%2===n%2)?!1:(i&&(e=s>0?"next":"prev"),k&&i&&t%2===1&&n%2===0&&(e="next"),c(t),p(),void w(C.duration,e))}function p(){var t=a(),e=l(),n=j;for(x();--n>-1;)A[n].style.visibility=n===t||n===e?"visible":"hidden";"function"==typeof C.before&&C.before(k?t%2:t)}function w(t,e){var n="",s="",i=a(),o=l(),r=(d(),f(),F.getCss3TransformPos(A[i]));r.toFixed(2)===I.toFixed(2)?(n="next"===e?"next-to-now":"prev-to-now",s="next"===e?"now-to-prev":"now-to-next",F.setCss3(A[i],"animation",s+" "+t+"ms"),F.setCss3(A[o],"animation",n+" "+t+"ms")):r%S==0?(t/=I,F.setCss3Transition(A[i],t,("next"===e?-S:S)+I),F.setCss3Transition(A[o],t,0+I)):(t=t*(S-Math.abs(r))/S,F.setCss3Transition(A[i],t,("next"===e?-S:S)+I),F.setCss3Transition(A[o],t,0+I))}function y(t){var e=a(),n=l(),s=0,i=0,o=j;if(parseInt(t.target.getAttribute("data-swipe-idx"),10)!==e)return!1;for(u(n),s=d(),i=f(),O[e]=n>e?-S:S,O[n]=0,F.setCss3Transition(A[e],0,O[e]+I),F.setCss3Transition(A[n],0,O[n]+I),F.setCss3(A[e],"animation",""),F.setCss3(A[n],"animation",""),-1!==s&&(O[s]=-S,F.setCss3Transition(A[s],0,O[s]+I)),-1!==i&&(O[i]=S,F.setCss3Transition(A[i],0,O[i]+I)),e=a();--o>-1;)A[o].style.visibility=o===e||o===s||o===i?"visible":"hidden";g(),"function"==typeof C.active&&C.active(k?e%2:e)}function x(){J=!0,o()}function g(){J=!1,i()}var S=100,C=null,E=null,b=null,A=null,T=null,_=null,L=null,B=null,M=null,$=null,k=!1,P=!1,J=!1,N=0,I=0,j=0,O=[],R=0,W=0,X={},z={wrap:null,list:null,pages:null,toStart:null,toStop:null,toPrev:null,toNext:null,startEvents:"click",stopEvents:"click",moveEvents:"click",pageEvents:"click",slideShowTime:3e3,touchMinumRange:10,loop:!0,duration:500,create:null,before:null,active:null},F={extend:function(t,e){var n=null,s={};for(n in t)s[n]=n in e?e[n]:t[n];return s},isArray:function(t){return t?"[object Array]"===Object.prototype.toString.call(t):!1},trim:function(t){return t.replace(/(^\s*)|(\s*$)/gi,"")},dom2Array:function(t){var e=[],n=0,s=0;if(t){if(s=t.length,s>0)for(n=0;s>n;n++)e.push(t[n]);else e.push(t);return e}return null},object2Array:function(t){var e=[];for(var n in t)e.push(t[n]);return e},getCssPrefix:function(){var t=["-webkit-transition","transition"],e=["-webkit-transform","transform"],n=["-webkit-animation","animation"],s=["-webkit-keyframes","keyframes"],i=["webkitTransition","transition"],o=["webkitTransform","transform"],r=["webkitAnimation","animation"],a=["webkitTransitionEnd","transitionend"],u=["webkitAnimationEnd","animationend"],l=window.getComputedStyle(document.body,""),c=(F.object2Array(l).join("").match(/-(webkit|moz|ms|o)-/)||""===l.OLink&&["","o"])[1],d="WebKit|Moz|MS|O".match(new RegExp("("+c+")","i"))[1],f="webkit"===c;return{prefixCss:c,prefixJs:d.toLowerCase(),transitionsCss:t[f?0:1],transformsCss:e[f?0:1],keyframesCss:s[f?0:1],animationsCss:n[f?0:1],transformsJs:o[f?0:1],transitionsJs:i[f?0:1],animationsJs:r[f?0:1],transitionsendJs:a[f?0:1],animationendJs:u[f?0:1]}},hasCss3Animation:function(){var t=document.createElement("div"),e=t.style;return X.transitionsJs in e&&X.animationsJs in e},getCss3AnimateTranslate:function(t,e,n){var s="";return s="@"+X.keyframesCss+" "+t+"{",s+="from {",s+=X.transformsCss+": translateX("+e+"%);",s+="}",s+="to {",s+=X.transformsCss+": translateX("+n+"%);",s+="}",s+="}"},getCss3TransformPos:function(t){var e=t.style,n="";return n=e[X.transformsJs],n=n.substring(n.indexOf("(")+1,n.indexOf("%")),parseFloat(n)},setListTransition:function(t,e,n){var s=0,i=0;for(i=0;j>i;i++)s=O[i],s+=e,n&&(O[i]=s),F.setCss3Transition(A[i],t,s);0===F.getCss3TransformPos(A[R])&&(J=!1)},setCss3Transition:function(t,e,n){F.setCss3(t,"transition",e+"ms"),F.setCss3(t,"transform","translateX("+n+"%)"),0===F.getCss3TransformPos(A[R])&&(J=!1)},setCss3:function(t,e,n){var s=t.style;"transition"===e?s[X.transitionsJs]=n:"transform"===e?s[X.transformsJs]=n:"animation"===e?s[X.animationsJs]=n:(s[e]=n,s["-"+X.prefixJs+"-"+e]=n)},setBtnEvent:function(t,e,n){for(var s=e.split(","),i=s.length,o=t.length,r="";--i>-1;)for(;--o>-1;)r=F.trim(s[i]),function(e){t[e].addEventListener(r,function(t){n(e),t.preventDefault()})}(o)}},D={is_touch_start:!1,touch_start_x:0,touch_start_y:0,move_dx:0,setInitVaiable:function(){D.is_touch_start=!1,D.touch_start_x=0,D.touch_start_y=0,D.move_dx=0},canPrevMove:function(){return C.loop||-1!==d()?!0:!1},canNextMove:function(){var t=f(),e=(k?j-2:j)-1;return!C.loop&&(-1===t||t>e)?!1:!0},setStart:function(t){return D.is_touch_start||J?!1:(x(),void(D.is_touch_start||"touchstart"!==t.type||1!==t.touches.length||(D.is_touch_start=!0,D.touch_start_x=t.touches[0].pageX,D.touch_start_y=t.touches[0].pageY)))},setMove:function(t){var e=0,n=0;D.is_touch_start&&"touchmove"===t.type&&1===t.touches.length&&(e=t.touches[0].pageX-D.touch_start_x,n=t.touches[0].pageY-D.touch_start_y,D.move_dx=e/N*100,Math.abs(e)>Math.abs(n)&&(D.move_dx=Math.max(-100,Math.min(100,D.move_dx)),F.setListTransition(0,D.move_dx),t.preventDefault()))},setEnd:function(t){var e=Math.abs(D.move_dx)>C.touchMinumRange,n=D.move_dx<0,s=n?D.canNextMove():D.canPrevMove();"touchend"===t.type&&e&&s?(J=!1,n?h():v()):F.setListTransition(C.duration,0+I),D.setInitVaiable()}};return e()?{startSlideShow:i,stopSlideShow:o,refreshSize:r,getIdx:a,toNext:h,toPrev:v,toSlide:m,destory:s}:void 0}!function(t){"use strict";t.fn.swipeBase=function(e){return e.$list=e.$list?e.$list:t(this).find("> ul > li"),e.$wrap=e.$wrap?e.$wrap:t(this).find("> ul"),e.wrap=e.$wrap?e.$wrap.toArray():[],e.list=e.$list?e.$list.toArray():[],e.pages=e.$pages?e.$pages.toArray():[],e.toStart=e.$toStart?e.$toStart.toArray():[],e.toStop=e.$toStop?e.$toStop.toArray():[],e.toPrev=e.$toPrev?e.$toPrev.toArray():[],e.toNext=e.$toNext?e.$toNext.toArray():[],this.each(function(){t(this).data("swipeBase",new SwipeBase(e))})},t.fn.swipeBase2start=function(){return this.each(function(){t(this).data("swipeBase").startSlideShow()})},t.fn.swipeBase2stop=function(){return this.each(function(){t(this).data("swipeBase").stopSlideShow()})},t.fn.swipeBase2prev=function(){return this.each(function(){t(this).data("swipeBase").toPrev()})},t.fn.swipeBase2next=function(){return this.each(function(){t(this).data("swipeBase").toNext()})},t.fn.swipeBase2slide=function(e){return this.each(function(){t(this).data("swipeBase").toSlide(e)})},t.fn.swipeBase2destory=function(){return this.each(function(){t(this).data("swipeBase").destory()})}}(jQuery);