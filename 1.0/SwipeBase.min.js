/*!*
 * @autor: Blim - Koo Chi Hoon(kkh975@naver.com)
 * @license http://blim.mit-license.org/
 */
function SwipeBase(t){"use strict";function e(){if(_=V.extend(D,t),b=V.isArray(_.wrap)?_.wrap:V.dom2Array(_.wrap),C=V.isArray(_.list)?_.list:V.dom2Array(_.list),!C||!b)return!1;if(O=C.length,b=b[0],A=b.parentNode,q=V.getCssPrefix(),_.touchMinumRange=Math.max(1,Math.min(100,_.touchMinumRange)),2>O)return!1;if(!(V.hasCss3Animation()&&"addEventListener"in window&&"querySelector"in document))return!1;if(_.slideShowTime&&("boolean"==typeof _.slideShowTime&&(P=_.slideShowTime,P&&(_.slideShowTime=D.slideShowTime)),"string"==typeof _.slideShowTime&&(_.slideShowTime=parseInt(_.slideShowTime,10)),isNaN(_.slideShowTime)?P=!1:(P=!0,2*_.duration>=_.slideShowTime&&(_.slideShowTime=2*_.duration))),_.toStart&&(M=V.isArray(_.toStart)?_.toStart:V.dom2Array(_.toStart),V.setBtnEvent(M,_.startEvents,i)),_.toStop&&(B=V.isArray(_.toStop)?_.toStop:V.dom2Array(_.toStop),V.setBtnEvent(B,_.stopEvents,o)),_.toPrev&&(L=V.isArray(_.toPrev)?_.toPrev:V.dom2Array(_.toPrev),V.setBtnEvent(L,_.moveEvents,v)),_.toNext&&($=V.isArray(_.toNext)?_.toNext:V.dom2Array(_.toNext),V.setBtnEvent($,_.moveEvents,m)),_.pages&&(T=V.isArray(_.pages)?_.pages:V.dom2Array(_.pages),V.setBtnEvent(T,_.moveEvents,function(t){h(t)})),2===O&&_.loop){var e=null;e=C[0].cloneNode(!0),C.push(e),b.appendChild(e),e=C[1].cloneNode(!0),C.push(e),b.appendChild(e),N=!0,O=4}A.addEventListener("touchstart",X.setStart),A.addEventListener("touchmove",X.setMove),A.addEventListener("touchend",X.setEnd),A.addEventListener("touchcancel",X.setEnd);for(var n=C.length;--n>-1;)C[n].setAttribute("data-swipe-idx",n),C[n].addEventListener("focus",o,!1),C[n].addEventListener("blur",i,!1),C[n].addEventListener(q.transitionsendJs,w,!1),C[n].addEventListener(q.animationendJs,w,!1);return!0}function n(){A.style.overflow="hidden",b.style.position="relative",V.setCss3(b,"transform-style","preserve-3d"),I=A.offsetWidth,j=(100-C[0].offsetWidth/I*100)/2;for(var t=0,e=O;e>t;t++)R.push(_.loop&&O-1===t?-g:g*t),C[t].style.position="absolute",C[t].style.visibility=2>t||O-1===t?"visible":"hidden",V.setCss3Transition(C[t],0,R[t]+j);if(!document.querySelector('style[data-swipe="SwipeBase"]')){var n="";n+=V.getCss3AnimateTranslate("next-to-now",g+j,0+j),n+=V.getCss3AnimateTranslate("now-to-prev",0+j,-g+j),n+=V.getCss3AnimateTranslate("prev-to-now",-g+j,0+j),n+=V.getCss3AnimateTranslate("now-to-next",0+j,g+j),E=document.createElement("style"),E.setAttribute("type","text/css"),E.setAttribute("data-swipe","SwipeBase"),E.innerHTML=n,A.appendChild(E)}i(),"function"==typeof _.create&&_.create(a())}function s(){var t=C.length;for(A.removeEventListener("touchstart",X.setStart),A.removeEventListener("touchmove",X.setMove),A.removeEventListener("touchend",X.setEnd),A.removeEventListener("touchcancel",X.setEnd);--t>-1;)C[t].removeAttribute("data-swipe-idx"),C[t].removeEventListener("focus",o,!1),C[t].removeEventListener("blur",i,!1),C[t].removeEventListener(q.transitionsendJs,w,!1),C[t].removeEventListener(q.animationendJs,w,!1);E&&E.parentNode.removeChild(E)}function i(){P&&null===k&&(k=setInterval(m,_.slideShowTime))}function o(){clearInterval(k),k=null}function r(){I=A.offsetWidth,j=(100-C[0].offsetWidth/I*100)/2}function a(){return W}function u(t){W=t}function l(){return z}function c(t){z=t}function d(){var t=a();return--t<0&&(t=_.loop?O-1:-1),t}function f(){var t=a();return++t>O-1&&(t=_.loop?0:-1),t}function v(){h(d(),"prev")}function m(){h(f(),"next")}function h(t,e){var n=a(),s=t-n,i=1===arguments.length;return J?!1:t===n?!1:0>t||t>O-1?!1:N&&i&&(t>1||t%2===n%2)?!1:(i&&(e=s>0?"next":"prev"),N&&i&&t%2===1&&n%2===0&&(e="next"),c(t),p(),void y(_.duration,e))}function p(){var t=a(),e=l(),n=O;for(S();--n>-1;)C[n].style.visibility=n===t||n===e?"visible":"hidden";"function"==typeof _.before&&_.before(N?t%2:t)}function y(t,e){var n="",s="",i=a(),o=l(),r=(d(),f(),V.getCss3TransformPos(C[i]));X.is_touch_start?r%g==0?w({target:C[i]}):(t=t*(g-Math.abs(r))/g,t=Math.max(Math.round(t),0),V.setCss3Transition(C[i],t,("next"===e?-g:g)+j),V.setCss3Transition(C[o],t,0+j),setTimeout(function(){V.getCss3TransformPos(C[o])==j&&J&&w({target:C[i]})},t+100)):(n="next"===e?"next-to-now":"prev-to-now",s="next"===e?"now-to-prev":"now-to-next",V.setCss3(C[i],"animation",s+" "+t+"ms"),V.setCss3(C[o],"animation",n+" "+t+"ms"))}function w(t){var e=a(),n=l(),s=0,i=0;if(!J)return!1;if(parseInt(t.target.getAttribute("data-swipe-idx"),10)===e){u(n),s=d(),i=f(),R[e]=n>e?-g:g,R[n]=0,V.setCss3Transition(C[e],0,R[e]+j),V.setCss3Transition(C[n],0,R[n]+j),V.setCss3(C[e],"animation",""),V.setCss3(C[n],"animation",""),-1!==s&&(R[s]=-g,V.setCss3Transition(C[s],0,R[s]+j)),-1!==i&&(R[i]=g,V.setCss3Transition(C[i],0,R[i]+j)),e=a();for(var o=O;--o>-1;)C[o].style.visibility=o===e||o===s||o===i?"visible":"hidden";x(),"function"==typeof _.active&&_.active(N?e%2:e)}}function S(){J=!0,o()}function x(){J=!1,i()}var g=100,_=null,A=null,b=null,C=null,E=null,T=null,M=null,B=null,L=null,$=null,k=null,N=!1,P=!1,J=!1,I=0,j=0,O=0,R=[],W=0,z=0,q={},D={wrap:null,list:null,pages:null,toStart:null,toStop:null,toPrev:null,toNext:null,startEvents:"click",stopEvents:"click",moveEvents:"click",pageEvents:"click",slideShowTime:3e3,touchMinumRange:10,loop:!0,duration:400,create:null,before:null,active:null},V={extend:function(t,e){var n=null,s={};for(n in t)s[n]=n in e?e[n]:t[n];return s},isArray:function(t){return t&&"[object Array]"===Object.prototype.toString.call(t)},dom2Array:function(t){var e=[],n=0,s=0;if(t){if(s=t.length,s>0)for(n=0;s>n;n++)e.push(t[n]);else e.push(t);return e}return null},object2Array:function(t){var e=[];for(var n in t)e.push(t[n]);return e},getCssPrefix:function(){var t=["-webkit-transition","transition"],e=["-webkit-transform","transform"],n=["-webkit-animation","animation"],s=["-webkit-keyframes","keyframes"],i=["webkitTransition","transition"],o=["webkitTransform","transform"],r=["webkitAnimation","animation"],a=["webkitTransitionEnd","transitionend"],u=["webkitAnimationEnd","animationend"],l=window.getComputedStyle(document.body,""),c=(V.object2Array(l).join("").match(/-(webkit|moz|ms|o)-/)||""===l.OLink&&["","o"])[1],d="WebKit|Moz|MS|O".match(new RegExp("("+c+")","i"))[1],f="webkit"===c;return{prefixCss:c,prefixJs:d.toLowerCase(),transitionsCss:t[f?0:1],transformsCss:e[f?0:1],keyframesCss:s[f?0:1],animationsCss:n[f?0:1],transformsJs:o[f?0:1],transitionsJs:i[f?0:1],animationsJs:r[f?0:1],transitionsendJs:a[f?0:1],animationendJs:u[f?0:1]}},hasCss3Animation:function(){var t=document.createElement("div");return q.transitionsJs in t.style&&q.animationsJs in t.style},getCss3AnimateTranslate:function(t,e,n){var s="";return s="@"+q.keyframesCss+" "+t+"{",s+="from {",s+=q.transformsCss+": translate3d("+e+"%, 0, 0);",s+="}",s+="to {",s+=q.transformsCss+": translate3d("+n+"%, 0, 0);",s+="}",s+="}"},getCss3TransformPos:function(t){var e="";return e=t.style[q.transformsJs],e=e.substring(e.indexOf("(")+1,e.indexOf("%")),parseFloat(e)},setListTransition:function(t,e,n){for(var s=0,i=0;O>s;s++)i=R[s],i+=e,n&&(R[s]=i),V.setCss3Transition(C[s],t,i)},setCss3Transition:function(t,e,n){V.setCss3(t,"transition",e+"ms"),V.setCss3(t,"transform","translate3d("+n+"%, 0, 0)")},setCss3:function(t,e,n){"transition"===e?t.style[q.transitionsJs]=n:"transform"===e?t.style[q.transformsJs]=n:"animation"===e?t.style[q.animationsJs]=n:(t.style[e]=n,t.style["-"+q.prefixJs+"-"+e]=n)},setBtnEvent:function(t,e,n){for(var s=e.split(","),i=s.length,o=t.length;--i>-1;)for(;--o>-1;)!function(e){t[e].addEventListener(s[i],function(t){n(e),t.preventDefault()})}(o)}},X={is_touch_start:!1,is_touch_move:!1,is_drag:!1,touch_start_x:0,touch_start_y:0,move_dx:0,setInitVaiable:function(){X.is_touch_start=!1,X.is_touch_move=!1,X.is_drag=!1,X.touch_start_x=0,X.touch_start_y=0,X.move_dx=0},canPrevMove:function(){return _.loop||-1!==d()?!0:!1},canNextMove:function(){var t=f(),e=(N?O-2:O)-1;return!_.loop&&(-1===t||t>e)?!1:!0},setStart:function(t){X.is_touch_start||J||(o(),"touchstart"===t.type&&1===t.touches.length&&(X.is_touch_start=!0,X.touch_start_x=t.touches[0].pageX,X.touch_start_y=t.touches[0].pageY))},setMove:function(t){var e=0,n=0;X.is_touch_start&&!J&&"touchmove"===t.type&&1===t.touches.length&&(e=t.touches[0].pageX-X.touch_start_x,n=t.touches[0].pageY-X.touch_start_y,X.move_dx=e/I*100,X.is_touch_move=!0,Math.abs(e)>Math.abs(n)?(X.is_drag=!0,X.move_dx=Math.max(-100,Math.min(100,X.move_dx)),V.setListTransition(0,X.move_dx),t.preventDefault()):X.is_drag=!1)},setEnd:function(t){var e=Math.abs(X.move_dx)>_.touchMinumRange,n=X.move_dx<0,s=n?X.canNextMove():X.canPrevMove();X.is_touch_start&&X.is_touch_move&&!J&&0!=Math.abs(X.move_dx)&&(X.is_drag&&e&&s?n?m():v():V.setListTransition(_.duration,0+j),X.setInitVaiable())}};return e()?(n(),{startSlideShow:i,stopSlideShow:o,refreshSize:r,getIdx:a,toNext:m,toPrev:v,toSlide:h,destory:s}):void 0}!function(t){"use strict";t.fn.swipeBase=function(e){return e=e||{},e.$list=e.$list||t(this).find("> ul > li"),e.$wrap=e.$wrap||t(this).find("> ul"),e.wrap=e.$wrap.toArray()||[],e.list=e.$list.toArray()||[],e.pages=e.$pages&&e.$pages.toArray?e.$pages.toArray():[],e.toStart=e.$toStart&&e.$toStart.toArray?e.$toStart.toArray():[],e.toStop=e.$toStop&&e.$toStop.toArray?e.$toStop.toArray():[],e.toPrev=e.$toPrev&&e.$toPrev.toArray?e.$toPrev.toArray():[],e.toNext=e.$toNext&&e.$toNext.toArray?e.$toNext.toArray():[],this.each(function(){t(this).data("SwipeBase",new SwipeBase(e))})},t.fn.swipeBase2start=function(){return this.each(function(){t(this).data("SwipeBase").startSlideShow()})},t.fn.swipeBase2stop=function(){return this.each(function(){t(this).data("SwipeBase").stopSlideShow()})},t.fn.swipeBase2prev=function(){return this.each(function(){t(this).data("SwipeBase").toPrev()})},t.fn.swipeBase2next=function(){return this.each(function(){t(this).data("SwipeBase").toNext()})},t.fn.swipeBase2slide=function(e){return this.each(function(){t(this).data("SwipeBase").toSlide(e)})},t.fn.swipeBase2destory=function(e){return this.each(function(){t(this).data("SwipeBase").destory()})}}(jQuery);